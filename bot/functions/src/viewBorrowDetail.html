<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายละเอียดการยืม</title>
    
  </head>
  <body>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="../../../backend/database/firebase.js"></script>
    <!--<script src="../database/firebase.js"></script>-->
    <script src="../liff-config.js"></script>
    <script src="../../../js/vconsole.min.js"></script>
    <script>
      var vConsole = new VConsole()
      console.log("Hello")
    </script>

    <p id="id"><b>ID:</b> </p>
    <p id="number"><b>หมายเลขครุภัณฑ์:</b> </p>
    <script>
    function getParams(){
      const queryString = decodeURIComponent(window.location.search);
      const params = new URLSearchParams(queryString);
      const decodeId = atob(params.get("id"))
      document.getElementById("id").append(decodeId);
      console.log("db:"+conn())
      /*const borrow = conn().collection('borrow')
      const query = borrow
      .where("item_id","==",decodeId)
      query
      .get()
      .then(snapshot =>{
        snapshot.forEach((doc)=>{
          console.log("id:"+doc.data().item_number);
          document.getElementById("number").append(doc.data().item_number);
        })
      })
      .catch(err =>{
        console.log(err);
      })*/
    }

    async function main() {
      await liff.init({ liffId: LiffID() })
      if (liff.isLoggedIn()) {
        getParams()
      }else{
        liff.login({ redirectUri: LiffURL("/bot/functions/src/viewBorrowDetail.html") })
      }
    }
    main()
    </script>
  </body>
</html>