<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายละเอียดการยืม</title>
    
  </head>
  <body>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="../liff-config.js"></script>
    <script src="../../../js/vconsole.min.js"></script>
    <script>
      var vConsole = new VConsole()
      console.log("Hello")
    </script>

    <p id="id"><b>ID:</b> </p>
    <p id="number"><b>หมายเลขครุภัณฑ์:</b> </p>
    <script>
      function getParams(){
        const queryString = decodeURIComponent(window.location.search);
        const params = new URLSearchParams(queryString);
        const decodeId = atob(params.get("id"))
        getData(decodeId)
        //document.getElementById("id").append(decodeId);
      }
      async function getData(id){
        const firestore = require("../database/firebase");
        const borrow = firestore.collection('borrow')
        const query = item
        .where("item_id","==",id)
        query
        .get()
        .then(snapshot =>{
          snapshot.forEach((doc)=>{
            document.getElementById("number").append(doc.data().item_number);
          })
        })
        .catch(err =>{
          console.log(err);
        })
      }
      async function main() {
        await liff.init({ liffId: LiffID() })
        if (liff.isLoggedIn()) {
          getParams()
        }else{
          liff.login({ redirectUri: LiffURL("/bot/functions/src/viewBorrowDetail.html") })
        }
      }
      main()
    </script>
  </body>
</html>